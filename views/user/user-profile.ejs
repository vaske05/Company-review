<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title><%= title %></title>
    <!-- Bootstrap Core CSS -->


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <!-- Custom CSS -->
    <link href="../css/simple.css" rel="stylesheet">
    <link href="../css/custom.css" rel="stylesheet">
    </head>
        <body><!--
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
-->
            <!-- jQuery -->
            <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

            <!-- Bootstrap Core JavaScript -->
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
            <div id="wrapper">
              <!--Sidebar -->
              <div id="sidebar-wrapper">
                  <div class="sidebar-brand">
                      <a href="/home">RateMe</a>
                  </div>
                  <ul class="sidebar-nav">
                      <img src="/uploads/<%= user.profileImage %>" class="img-responsive img-circle profile_img" alt="">
                      <div class="profile_info">
                          <span>Welcome,</span>
                          <h2><%= user.fullname %></h2>
                      </div>
                      <li><a href="/home"> <i class="fa fa-home"></i>Home</a></li>
                      <li><a href="/companies"> <i class="fa fa-building-o"></i>Companies</a></li>
                      <li><a href="/search"> <i class="fa fa-search"></i>Company Search</a></li>
                      <li><a href="/leaderboard"> <i class="fa fa-bars"></i>Leaderboard</a></li>
                      <li><a href="/logout"> <i class="glyphicon glyphicon-log-out"></i>Log Out</a></li>
                  </ul>
              </div>
              <!--Sidebar -->
              <div id="page-content-wrapper">
                  <!--Navbar -->
                <%/* comment */%>
                  <nav class="navbar">
                      <div class="container-fluid main_body">
                          <!-- Brand and toggle get grouped for better mobile display -->
                          <div class="navbar-header">
                          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                              <span class="sr-only">Toggle navigation</span>
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                          </button>
                          <a href="#menu-toggle" class="btn btn-default" id="menu-toggle"><i class="fa fa-bars"></i></a>
                          </div>

                          <!-- Collect the nav links, forms, and other content for toggling -->
                          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                          <ul class="nav navbar-nav navbar-right">
                          </ul>
                          </div><!-- /.navbar-collapse -->
                      </div><!-- /.container-fluid -->
                  </nav>

                  <!--Navbar -->
                  <div class="container-fluid main_body">
                      <br>
                      <div class="ul_links">
                          <ul>
                              <li><a href="/home">Home</a></li>
                              <li><a>|</a></li>
                              <li><a href="">User Profile</a></li>
                          </ul>
                      </div>
                      <div class="bodyDiv">
                        <h4 style="">User Profile</h4>

                        <div class="row mainDiv">
                            <div class="innerDiv">

                                <div class="col-md-3" style="margin-bottom:30px;">
                                    <img src="/uploads/<%= user.profileImage %>" width="250px" height="250px" alt="" style="border: 1px solid #ddd;border-radius: 4px;">
                                    <div class="form-group">
                                        <label for="">Profile Image</label><br>
                                        <button id="myBtn" class="btn btn-lg" type="button" data-toggle="modal" data-target="#myModal">Add Image</button>
                                        <span id="completed"></span>
                                    </div>
                                </div>
                                <form id="companyForm" method="POST" action="/user/<%= user._id %>">
                                  <div id="myModal" class="modal" tabindex="-1" role="dialog" style="z-index: 1100;">
                                      <div class="modal-dialog">
                                          <div class="modal-content">
                                              <div class="modal-header">
                                                  <button type="button" id="close" class="close" data-dismiss="modal">&times;</button>
                                                  <div class="modal-title">Upload Image</div>
                                              </div>

                                              <div class="modal-body">
                                                  <div class="row">
                                                      <div class="progress">
                                                          <div class="progress-bar" role="progressbar"></div>
                                                      </div>

                                                      <button class="btn btn-lg upload-btn" type="button" id="uploadButtonPI">Upload File</button>
                                                      <input type="file" class="form-control" name="upload" id="upload-inputPIw" style="display:none">
                                                  </div>
                                              </div>

                                          </div>
                                      </div>
                                  </div>
                                  <div class="col-md-9 colDiv3">
                                    <a id="editBtn" class="btn btn-info" style="float: right; margin-right: 142px; margin-bottom:7px;">Edit</a><br>
                                    <p style="float:left; margin-right: 7px; margin-top:22px;">Full name: </p>
                                    <input id="fullName" style="width: 80%; margin-bottom: 4px;" type="text" readonly="true" name="fullName" value="<%= user.fullname %>" class="form-control">

                                    <p style="float:left; margin-right: 9px; margin-top:4px;">Company: </p>
                                    <input id="company" style="width: 80%; margin-bottom: 4px;"type="text" readonly="true" name="" value="<%= user.company.name %>" class="form-control">

                                    <p style="float:left; margin-right: 48px; margin-top:4px;">Role: </p>
                                    <input id="role" style="width: 80%; margin-bottom: 4px;"type="text" readonly="true" name="" value="<%= user.role %>" class="form-control">

                                    <p style="float:left; margin-right: 40px; margin-top:4px;">Email: </p>
                                    <input  style="width: 80%; margin-bottom: 4px;"type="text" readonly="true" name="" value="<%= user.email %>" class="form-control">

                                    <p style="float:left; margin-right: 22px; margin-top:4px;">Country: </p>
                                    <input id="country" style="width: 80%; margin-bottom: 4px;"type="text" readonly="true" name="country" value="<%= user.country %>" class="form-control">

                                    <p style="float:left; margin-right: 54px; margin-top:4px;">City: </p>
                                    <input id="city" style="width: 80%; margin-bottom: 4px;"type="text" readonly="true" name="city" value="<%= user.city %>" class="form-control">

                                    <div class="form-group">
                                        <input type="submit" id="submitProfile" value="Submit" class="form-control btn btn-primary"style=" position: relative; left: 35%; margin-top:10px; width:200px;  margin-bottom:7px;" name="register" style="" >
                                    </div>
                                  </div>
                                </form>
                            </div>
                        </div>
                      </div>
                  </div>
              </div>
            </div>
            <script>
            $("#menu-toggle").click(function(e){
                e.preventDefault();
                $("#wrapper").toggleClass("toggled");
            })
            </script>
            <script src="/js/uploadProfileImage.js"> </script>
            <script src="/js/userProfile.js"> </script>
            <script type="text/javascript" src="/js/jquery.raty.js"></script>
            <script type="text/javascript">
              $(document).ready(function(){
                $.fn.raty.defaults.path = '/images/';
                $('.star').raty({
                  readOnly: true,
                  size: 50,
                  score: function(data){
                    return $(this).attr('data-score');
                  }
                });
              });
            </script>

            <script>
            // Get the modal
            var modal = document.getElementById('myModal');

            // Get the button that opens the modal
            var btn = document.getElementById("myBtn");

            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("modal-header")[0];

            // When the user clicks the button, open the modal
            btn.onclick = function() {
                modal.style.display = "block";
            }

            // When the user clicks on <span> (x), close the modal
            span.onclick = function() {
                modal.style.display = "none";
            }

            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
            </script>
            </body>
</html>
